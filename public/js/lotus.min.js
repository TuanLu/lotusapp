!function(e){function t(t){for(var n,s,l=t[0],o=t[1],d=t[2],c=0,p=[];c<l.length;c++)s=l[c],r[s]&&p.push(r[s][0]),r[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(h&&h(t);p.length;)p.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var o=a[l];0!==r[o]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={1:0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var l=window.webpackJsonp=window.webpackJsonp||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var h=o;i.push([468,0]),a()}({298:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),s=a.n(i),l=a(36),o=a(469),d=a(470),h=a(18),c=a(279);var p={START_APP:"START_APP",UPDATE_STATE_DATA:"UPDATE_STATE_DATA"};const u=e=>({type:p.UPDATE_STATE_DATA,updateData:e});c.a.SubMenu;var m,g,f=class extends r.a.Component{renderMenuItem(){let e=this.props.mainState;return e.defaultRouter,e.userRoles.map((e,t)=>r.a.createElement(c.a.Item,{onClick:()=>{this.props.dispatch(u({defaultRouter:e.path}))},key:e.path},r.a.createElement(h.a,{type:e.icon}),r.a.createElement("span",null,e.label)))}render(){let e=this.props.mainState.defaultRouter;return r.a.createElement("div",null,r.a.createElement(c.a,{defaultSelectedKeys:[e],mode:"inline",theme:"dark"},this.renderMenuItem()))}},y=a(477),E=a(75),v=a(474),S=a(478),x=a(472),j=a(117),w=a(479),k=a(475);Object.assign;function b(e){let t={};return e.length&&e.forEach(e=>{t[e.id]=e}),t}window.ISD_BASE_URL&&""!=window.ISD_BASE_URL||(window.ISD_BASE_URL=window.location.protocol+"//"+(m=document.location.href,null!=(g=m.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i))&&g.length>2&&"string"==typeof g[2]&&g[2].length>0?g[2]:null)+"/");const C=()=>{let e=sessionStorage.getItem("ISD_TOKEN");if(""!=e&&null!=e)return{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e}},I=[{value:"0",text:"Ngừng kích hoạt"},{value:"1",text:"Kích hoạt"}];var _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function D(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const T=v.a.Item,O=r.a.createContext(),N=v.a.create()(e=>{let t=e.form,a=(e.index,D(e,["form","index"]));return r.a.createElement(O.Provider,{value:t},r.a.createElement("tr",a))});class A extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"ranking":return r.a.createElement(j.a,{placeholder:"Chọn xếp hạng"},r.a.createElement(j.a.Option,{value:"A"},"A"),r.a.createElement(j.a.Option,{value:"B"},"B"),r.a.createElement(j.a.Option,{value:"C"},"C"),r.a.createElement(j.a.Option,{value:"D"},"D"));default:return r.a.createElement(x.a,null)}}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),l=(e.index,D(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(O.Consumer,null,e=>{const o=e.getFieldDecorator;return r.a.createElement("td",l,t?r.a.createElement(T,{style:{margin:0}},o(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):l.children)})}}var q=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"npp/deleteNpp/"+e.id,{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá nhà cung cấp!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá nhà cung cấp!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Mã NCC",dataIndex:"ma_npp",width:"10%",editable:!0,required:!0},{title:"Tên",dataIndex:"name",editable:!0,required:!0},{title:"Địa chỉ",dataIndex:"address",editable:!0,required:!0},{title:"Điện thoại",dataIndex:"phone",editable:!0},{title:"Xếp hạng",dataIndex:"ranking",editable:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(O.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(y.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(y.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=_({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới NCC rồi ...")}getDefaultFields(){return{ma_npp:"",name:"",address:"",phone:"",ranking:"A"}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=_({},e,a);fetch(ISD_BASE_URL+"npp/updateNpp",{method:"POST",headers:C(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(u({showLogin:!0}))):(n.splice(r,1,_({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"npp/fetchNpp",{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>_({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu nhà cung cấp!",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:N,cell:A}},t=this.columns.map(e=>e.editable?_({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(w.a,null,r.a.createElement(S.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý nhà cung cấp")),r.a.createElement(S.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(E.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm mới NCC"))))),r.a.createElement(k.a,{components:e,bordered:!0,dataSource:this.state.data,columns:t,rowClassName:"editable-row"}))}},R=a(473);const L=R.a.SHOW_PARENT;var K=Object(l.b)(e=>({mainState:e.main.present}))(class extends r.a.Component{constructor(e){super(e),this.onChange=(e=>{this.setState({value:e}),this.props.onChange&&this.props.onChange(e)}),this.state={value:this.props.selectedRoles||[],treeData:[]}}fetchData(){fetch(ISD_BASE_URL+"fetchAllRoles").then(e=>e.json()).then(e=>{e.data?(this.setState({treeData:e.data}),this.props.dispatch(u({allUserRoles:e.data}))):console.warn(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){let e=this.props.mainState.allUserRoles;e?this.setState({treeData:e}):this.fetchData()}render(){const e={treeData:this.state.treeData,value:this.state.value,onChange:this.onChange,treeCheckable:!0,showCheckedStrategy:L,searchPlaceholder:"Hãy chọn quyền",style:{width:300}};return r.a.createElement(R.a,e)}}),P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function B(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const F=v.a.Item,U=r.a.createContext(),M=v.a.create()(e=>{let t=e.form,a=(e.index,B(e,["form","index"]));return r.a.createElement(U.Provider,{value:t},r.a.createElement("tr",a))});class H extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"status":return r.a.createElement(j.a,{placeholder:"Chọn xếp hạng"},I.map(e=>r.a.createElement(j.a.Option,{key:e.value,key:e.value},e.text)));case"hash":return r.a.createElement(x.a,{type:"password",placeholder:"Nhập mật khẩu"});case"roles":let e=[];return this.props.record&&this.props.record.roles&&""!=this.props.record.roles&&(e=this.props.record.roles.split(",")),r.a.createElement(K,{selectedRoles:e});default:return r.a.createElement(x.a,null)}}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),l=(e.index,B(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(U.Consumer,null,e=>{const o=e.getFieldDecorator;return r.a.createElement("td",l,t?r.a.createElement(F,{style:{margin:0}},o(n,{rules:(e=>{let t=[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}];return"email"==n&&(t=[...t,{type:"email",message:"Email không hợp lệ"}]),t})(),initialValue:s[n]})(this.getInput())):l.children)})}}var z=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"users/deleteUser/"+e.id,{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error(response.message,3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá user!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Tên đăng nhập",dataIndex:"username",editable:!0,required:!0},{title:"Email",dataIndex:"email",editable:!0,required:!0},{title:"Mật khẩu",dataIndex:"hash",editable:!0,required:!1,render:(e,t)=>"Đã mã hoá"},{title:"Họ và tên",dataIndex:"name",editable:!0,required:!1},{title:"Quyền",dataIndex:"roles",editable:!0,required:!1},{title:"Trạng thái",dataIndex:"status",editable:!0,render:(e,t)=>{let a=I.filter(t=>t.value==e);return r.a.createElement("span",null,a[0].text)}},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(U.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(y.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"}," "," | ","Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(y.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=P({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới người dùng rồi ...")}getDefaultFields(){return{username:"",email:"",name:"",hash:"",status:"1",roles:[]}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=P({},e,a);fetch(ISD_BASE_URL+"users/updateUser",{method:"POST",headers:C(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(u({showLogin:!0}))):(n.splice(r,1,P({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"users/fetchUsers",{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>P({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu !",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:M,cell:H}},t=this.columns.map(e=>e.editable?P({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(w.a,null,r.a.createElement(S.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý người dùng")),r.a.createElement(S.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(E.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm mới người dùng"))))),r.a.createElement(k.a,{components:e,bordered:!0,dataSource:this.state.data,columns:t,rowClassName:"editable-row"}))}},V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const $=v.a.Item;var J=v.a.create()(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={loading:!1},this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{e||(this.setState({loading:!0}),this.getToken(V({},t)))})}),t}getToken(e){fetch(ISD_BASE_URL+"token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{e.token?(sessionStorage.setItem("ISD_TOKEN",e.token),this.props.dispatch(u({showLogin:!1,userRoles:e.scopes||[],userInfo:e.userInfo,defaultRouter:e.scopes[0]&&e.scopes[0].path?e.scopes[0].path:""}))):(d.a.error(e.message,5),this.setState({loading:!1}))}).catch(e=>{console.warn(e),d.a.error("Có lỗi trong quá trình đăng nhập!")})}render(){const e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("div",{className:"login-logo"},r.a.createElement("img",{src:"./images/logo.png"})),r.a.createElement(v.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement($,null,e("userName",{rules:[{required:!0,message:"Nhập tên đăng nhập!"}]})(r.a.createElement(x.a,{prefix:r.a.createElement(h.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tên đăng nhập"}))),r.a.createElement($,null,e("password",{rules:[{required:!0,message:"Nhập mật khẩu!"}]})(r.a.createElement(x.a,{prefix:r.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Mật khẩu"}))),r.a.createElement($,null,r.a.createElement(E.a,{loading:this.state.loading,type:"primary",htmlType:"submit",className:"login-form-button"},"Đăng nhập"))))}});var W=class extends r.a.Component{showUserName(){let e=this.props.mainState.userInfo;if(e)return e.name||e.username||e.email}render(){return r.a.createElement("div",{className:"admin-user-info"},r.a.createElement("span",null,"Xin chào, ",r.a.createElement("b",null,this.showUserName())),r.a.createElement(E.a,{onClick:()=>{this.props.dispatch(u({showLogin:!0}))},type:"primary",ghost:!0},"Đăng xuất"))}},X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};class Q extends r.a.Component{render(){return r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},className:"isd-app-loading"},r.a.createElement(h.a,{style:X({fontSize:46,color:"#08c",width:"100%"},this.props.style),type:"loading"}))}}var Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function G(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const Z=v.a.Item,ee=r.a.createContext(),te=v.a.create()(e=>{let t=e.form,a=(e.index,G(e,["form","index"]));return r.a.createElement(ee.Provider,{value:t},r.a.createElement("tr",a))});class ae extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(x.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),l=(e.index,G(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(ee.Consumer,null,e=>{const o=e.getFieldDecorator;return r.a.createElement("td",l,t?r.a.createElement(Z,{style:{margin:0}},o(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):l.children)})}}var ne=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"qlkho/deleteKho/"+e.id,{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá dữ liệu kho!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu kho!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Mã Kho",dataIndex:"ma_kho",width:"10%",editable:!0,required:!0},{title:"Tên",dataIndex:"name",editable:!0,required:!0},{title:"Thông tin",dataIndex:"description",editable:!0,required:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(ee.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(y.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(y.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=Y({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới kho rồi ...")}getDefaultFields(){return{ma_kho:"",name:"",description:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=Y({},e,a);fetch(ISD_BASE_URL+"qlkho/updateKho",{method:"POST",headers:C(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,Y({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"qlkho/fetchKho",{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>Y({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:te,cell:ae}},t=this.columns.map(e=>e.editable?Y({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(w.a,null,r.a.createElement(S.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý kho")),r.a.createElement(S.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(E.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm kho mới"))))),r.a.createElement(k.a,{components:e,bordered:!0,dataSource:this.state.data,columns:t,rowClassName:"editable-row"}))}},re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function ie(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const se=v.a.Item,le=r.a.createContext(),oe=v.a.create()(e=>{let t=e.form,a=(e.index,ie(e,["form","index"]));return r.a.createElement(le.Provider,{value:t},r.a.createElement("tr",a))});class de extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(x.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),l=(e.index,ie(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(le.Consumer,null,e=>{const o=e.getFieldDecorator;return r.a.createElement("td",l,t?r.a.createElement(se,{style:{margin:0}},o(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):l.children)})}}var he=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"qlcate/deleteCate/"+e.id,{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá dữ liệu kho!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu kho!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Tên danh mục",dataIndex:"name",editable:!0,required:!0},{title:"Thông tin",dataIndex:"description",editable:!0,required:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(le.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(y.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(y.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=re({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới danh mục rồi ...")}getDefaultFields(){return{name:"",description:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=re({},e,a);fetch(ISD_BASE_URL+"qlcate/updateCate",{method:"POST",headers:C(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,re({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"qlcate/fetchCate",{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>re({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu danh mục!",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:oe,cell:de}},t=this.columns.map(e=>e.editable?re({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(w.a,null,r.a.createElement(S.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý Danh mục")),r.a.createElement(S.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(E.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm mới"))))),r.a.createElement(k.a,{components:e,bordered:!0,dataSource:this.state.data,columns:t,rowClassName:"editable-row"}))}},ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function pe(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const ue=v.a.Item,me=r.a.createContext(),ge=v.a.create()(e=>{let t=e.form,a=(e.index,pe(e,["form","index"]));return r.a.createElement(me.Provider,{value:t},r.a.createElement("tr",a))});class fe extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(x.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),l=(e.index,pe(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(me.Consumer,null,e=>{const o=e.getFieldDecorator;return r.a.createElement("td",l,t?r.a.createElement(ue,{style:{margin:0}},o(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):l.children)})}}var ye=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"qlkh/deleteKh/"+e.id,{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá dữ liệu khách hàng!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu khách hàng!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Mã Khách Hàng",dataIndex:"ma_kh",width:"10%",editable:!0,required:!0},{title:"Tên",dataIndex:"name",editable:!0,required:!0},{title:"Số điện thoại",dataIndex:"phone",editable:!0,required:!0},{title:"Địa chỉ",dataIndex:"adress",editable:!0,required:!0},{title:"Thông tin",dataIndex:"description",editable:!0,required:!1},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(me.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(y.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(y.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=ce({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới khách hàng rồi ...")}getDefaultFields(){return{ma_kh:"",name:"",description:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=ce({},e,a);fetch(ISD_BASE_URL+"qlkh/updateKh",{method:"POST",headers:C(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,ce({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"qlkh/fetchKh",{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>ce({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu khách hàng!",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:ge,cell:fe}},t=this.columns.map(e=>e.editable?ce({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(w.a,null,r.a.createElement(S.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý khách hàng")),r.a.createElement(S.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(E.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm khách hàng mới"))))),r.a.createElement(k.a,{components:e,bordered:!0,dataSource:this.state.data,columns:t,rowClassName:"editable-row"}))}},Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function ve(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const Se=v.a.Item,xe=r.a.createContext(),je={headTitle:"Quản lý sản phẩm",addNewTitle:"Thêm sản phẩm mới"},we={fetch:"product/fetch",update:"product/update",delete:"product/delete/"},ke=v.a.create()(e=>{let t=e.form,a=(e.index,ve(e,["form","index"]));return r.a.createElement(xe.Provider,{value:t},r.a.createElement("tr",a))});class be extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"category_id":let e=this.props.categories;return r.a.createElement(j.a,{style:{width:250},placeholder:"Chọn danh mục"},e.map(e=>r.a.createElement(j.a.Option,{key:e.id,value:e.id},e.name)));default:return r.a.createElement(x.a,null)}}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),l=(e.index,ve(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(xe.Consumer,null,e=>{const o=e.getFieldDecorator;return r.a.createElement("td",l,t?r.a.createElement(Se,{style:{margin:0}},o(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):l.children)})}}var Ce=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+we.delete+e.id,{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",categoryList:{},newitem:0},this.columns=[{title:"Mã Danh mục",dataIndex:"category_id",width:"15%",editable:!0,required:!0,render:(e,t)=>{let a=e;return this.state.categoryList&&this.state.categoryList[e]&&(a=this.state.categoryList[e].name),r.a.createElement("span",null,a)}},{title:"Mã VT",dataIndex:"product_id",width:"15%",editable:!0,required:!0},{title:"Tên sản phẩm",dataIndex:"name",editable:!0,required:!0},{title:"Đơn vị",dataIndex:"unit",editable:!0},{title:"Min",dataIndex:"min",editable:!0},{title:"Max",dataIndex:"max",editable:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(xe.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(y.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(y.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=Ee({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới sản phẩm rồi ...")}getDefaultFields(){return{product_id:"",category_id:"",name:"",unit:"",min:"0",max:"0"}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=Ee({},e,a);fetch(ISD_BASE_URL+we.update,{method:"POST",headers:C(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(u({showLogin:!0}))):(n.splice(r,1,Ee({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchCategories(){fetch(ISD_BASE_URL+"qlcate/fetchCate",{headers:C()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(u({categories:e.data})),this.setState({categoryList:b(e.data)})):d.a.error(e.message)}).catch(e=>{console.log(e)})}fetchData(){fetch(ISD_BASE_URL+we.fetch,{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>Ee({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu sản phẩm!",3),console.log(e)})}componentDidMount(){this.fetchCategories(),this.fetchData()}render(){const e={body:{row:ke,cell:be}};let t=this.props.mainState.categories;const a=this.columns.map(e=>e.editable?Ee({},e,{onCell:a=>({record:a,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(a),required:e.required,categories:t})}):e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(w.a,null,r.a.createElement(S.a,{span:12},r.a.createElement("h2",{className:"head-title"},je.headTitle)),r.a.createElement(S.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(E.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},je.addNewTitle))))),r.a.createElement(k.a,{components:e,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row"}))}},Ie=a(7),_e=a.n(Ie),De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const Te=v.a.Item,Oe=j.a.Option,Ne={person:"Người giao hàng"};var Ae=class extends r.a.Component{constructor(e){super(e)}fetchData(){fetch(ISD_BASE_URL+"qlkho/fetchKho",{headers:C()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(u({kho:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}componentDidMount(){this.props.mainState.kho.length||this.fetchData()}render(){var e=this.props.mainState;let t=e.phieunhap,a=e.phieuAction,n=!(!a||"view"!=a.action),i="",s=this.props.mainState.kho;return s.length&&(i=s.map(e=>r.a.createElement(Oe,{key:e.id,value:e.id},e.name))),r.a.createElement(v.a,null,r.a.createElement(Te,{label:"Số chứng từ",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(x.a,{readOnly:n,onChange:e=>{this.props.dispatch(u({phieunhap:De({},this.props.mainState.phieunhap,{so_chung_tu:e.target.value})}))},value:t.so_chung_tu})),r.a.createElement(Te,{label:Ne.person,labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(x.a,{readOnly:n,onChange:e=>{this.props.dispatch(u({phieunhap:De({},this.props.mainState.phieunhap,{nguoi_giao_dich:e.target.value})}))},value:t.nguoi_giao_dich})),r.a.createElement(Te,{label:"Tại Kho",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(j.a,{disabled:n,onChange:e=>{this.props.dispatch(u({phieunhap:De({},this.props.mainState.phieunhap,{ma_kho:e})}))},defaultValue:t.ma_kho,placeholder:"Chọn kho"},i)),r.a.createElement(Te,{label:"Mô tả",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(x.a.TextArea,{readOnly:n,autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(u({phieunhap:De({},this.props.mainState.phieunhap,{note:e.target.value})}))},value:t.note})),r.a.createElement(Te,{label:"Địa điểm",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(x.a.TextArea,{readOnly:n,autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(u({phieunhap:De({},this.props.mainState.phieunhap,{address:e.target.value})}))},value:t.address})),r.a.createElement(Te,{label:"Ngày tạo",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(x.a,{readOnly:!0,onChange:e=>{},value:t.create_on||_e()(new Date).format("DD/MM/YYYY")})))}},qe=a(471),Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function Le(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const Ke=v.a.Item,Pe=r.a.createContext(),Be={headTitle:"Vật tư của phiếu nhập",addNewTitle:"Thêm vật tư vào phiếu nhập"},Fe={fetch:"phieunhap/fetch",update:"phieunhap/updateProduct",delete:"phieunhap/deleteProduct/"},Ue=v.a.create()(e=>{let t=e.form,a=(e.index,Le(e,["form","index"]));return r.a.createElement(Pe.Provider,{value:t},r.a.createElement("tr",a))});class Me extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"product_id":let e=this.props.products;return r.a.createElement(j.a,{showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,style:{width:200},placeholder:"Chọn VT"},e.map(e=>r.a.createElement(j.a.Option,{key:e.product_id,value:e.product_id},`${e.product_id} - ${e.name} - ${e.unit} `)));case"sl_thucnhap":case"sl_chungtu":case"price":return r.a.createElement(qe.a,null);default:return r.a.createElement(x.a,null)}}),this.handleChange=(e=>{console.log(e)}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),l=(e.index,Le(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(Pe.Consumer,null,e=>{const o=e.getFieldDecorator;return r.a.createElement("td",l,t?r.a.createElement(Ke,{style:{margin:0}},o(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):l.children)})}}var He=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.props.mainState.phieuAction.editingKey),this.cancel=(e=>{this.props.dispatch(u({phieuAction:Re({},this.props.mainState.phieuAction,{editingKey:""})}))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+Fe.delete+e.id,{headers:C()}).then(e=>e.json()).then(t=>{if("error"==t.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let a=this.props.mainState.phieunhap.products.filter(t=>t.key!=e.id);this.props.dispatch(u({phieunhap:Re({},this.props.mainState.phieunhap,{products:a})})),d.a.success(t.message)}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)});else if(e.key){let t=this.props.mainState.phieunhap.products.filter(t=>t.key!=e.key);this.props.dispatch(u({phieunhap:Re({},this.props.mainState.phieunhap,{products:t})}))}}),this.state={productList:{}},this.columns=[{title:"Mã Lô",dataIndex:"ma_lo",width:"10%",editable:!0,required:!0},{title:"Mã VT",dataIndex:"product_id",editable:!0,required:!0},{title:"Quy cách",dataIndex:"label",editable:!0,required:!0},{title:"Đơn vị tính",dataIndex:"unit",editable:!0},{title:"Số lượng chứng từ",dataIndex:"sl_chungtu",editable:!0},{title:"Số lượng thực nhập",dataIndex:"sl_thucnhap",editable:!0},{title:"Đơn giá",dataIndex:"price",editable:!0,required:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{if(this.isReadOnly())return"";const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(Pe.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(y.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t.key)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(y.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){let e=this.props.mainState.phieunhap.products,t=this.props.mainState.phieuAction.editingKey;if(void 0!==t&&""!==t)return!1;let a=this.getDefaultFields();a=Re({},a,{key:e.length+1}),this.props.dispatch(u({phieunhap:Re({},this.props.mainState.phieunhap,{products:[a,...e]}),phieuAction:Re({},this.props.mainState.phieuAction,{editingKey:a.key})}))}getDefaultFields(){return{ma_phieu:"",ma_lo:"",product_id:"",label:"",unit:"",sl_chungtu:"1",sl_thucnhap:"1",price:""}}isReadOnly(){let e=this.props.mainState.phieuAction;return!(!e||"view"!=e.action)}edit(e){this.props.dispatch(u({phieuAction:Re({},this.props.mainState.phieuAction,{editingKey:e})}))}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.props.mainState.phieunhap.products];let r=this.props.mainState.phieunhap.ma_phieu||"";const i=n.findIndex(e=>t===e.key);if(i>-1){const e=n[i];let t=Re({},e,a,{ma_phieu:r});if(!n.id&&!r)return n.splice(i,1,Re({},t)),this.props.dispatch(u({phieunhap:Re({},this.props.mainState.phieunhap,{products:n}),phieuAction:Re({},this.props.mainState.phieuAction,{editingKey:""})})),!1;r&&fetch(ISD_BASE_URL+Fe.update,{method:"POST",headers:C(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(u({showLogin:!0}))):(n.splice(i,1,Re({},t,e.data)),this.props.dispatch(u({phieunhap:Re({},this.props.mainState.phieunhap,{products:n}),phieuAction:Re({},this.props.mainState.phieuAction,{editingKey:""})})),d.a.success(e.message))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchProduct(){fetch(ISD_BASE_URL+"phieunhap/fetchProductDetailsList",{headers:C()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(u({products:e.data})),this.setState({productList:b(e.data)})):d.a.error(e.message)}).catch(e=>{console.log(e)})}fetchSelectedProduct(){let e=this.props.mainState.phieunhap.ma_phieu;fetch(ISD_BASE_URL+`phieunhap/fetchSelectedProduct/${e}`,{headers:C()}).then(e=>e.json()).then(e=>{e.data?e.data&&this.props.dispatch(u({phieunhap:Re({},this.props.mainState.phieunhap,{products:e.data})})):d.a.error(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){var e=this.props.mainState;let t=e.products,a=e.phieunhap;t.length||this.fetchProduct(),a.ma_phieu&&this.fetchSelectedProduct()}render(){const e={body:{row:Ue,cell:Me}};let t=this.props.mainState.products;const a=this.columns.map(e=>e.editable?Re({},e,{onCell:a=>({record:a,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(a),required:e.required,products:t})}):e);let n=this.props.mainState.phieunhap.products||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(w.a,null,r.a.createElement(S.a,{span:12},r.a.createElement("h2",{className:"head-title"},Be.headTitle)),r.a.createElement(S.a,{span:12},r.a.createElement("div",{className:"action-btns"},this.isReadOnly()?null:r.a.createElement(E.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},Be.addNewTitle))))),r.a.createElement(k.a,{components:e,bordered:!0,dataSource:n,columns:a,rowClassName:"editable-row"}))}},ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var Ve=Object(l.b)(e=>({mainState:e.main.present}))(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.handleSubmit=(e=>{e.preventDefault(),this.validBeforeSave()&&fetch(ISD_BASE_URL+"phieunhap/update",{method:"POST",headers:C(),body:JSON.stringify(this.props.mainState.phieunhap)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(u({showLogin:!0}))):(d.a.success(e.message),this.props.dispatch(u({phieunhap:{refresh:!0},phieuAction:{}})))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}),t}validBeforeSave(){let e=this.props.mainState.phieunhap;return e.ma_kho?e.nguoi_giao_dich?!!e.products.length||(d.a.error("Chưa có sản phẩm nào trong phiếu này."),!1):(d.a.error("Thiếu thông tin người giao dịch"),!1):(d.a.error("Mã kho không được để trống"),!1)}cancel(){this.props.dispatch(u({phieuAction:ze({},this.props.mainState.phieuAction,{addNewItem:!1})}))}render(){let e=this.props.mainState.phieuAction;return r.a.createElement("div",null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(w.a,null,r.a.createElement(S.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Thông tin phiếu nhập")),r.a.createElement(S.a,{span:12},r.a.createElement("div",{className:"action-btns"},e&&"edit"==e.action?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{onClick:this.handleSubmit,type:"primary",htmlType:"button",icon:"save"},"Lưu phiếu nhập"),r.a.createElement(y.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel()},r.a.createElement(E.a,{style:{marginLeft:10},type:"danger"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{onClick:()=>{this.props.dispatch(u({phieuAction:ze({},this.props.mainState.phieuAction,{action:"edit"})}))},type:"primary",htmlType:"button",icon:"edit"},"Sửa phiếu nhập"),r.a.createElement(E.a,{onClick:()=>this.cancel(),style:{marginLeft:10},icon:"left",type:"default"},"Quay lại")))))),r.a.createElement(Ae,{dispatch:this.props.dispatch,mainState:this.props.mainState}),r.a.createElement(He,{dispatch:this.props.dispatch,mainState:this.props.mainState}))}}),$e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function Je(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const We=b([{id:"1",value:"1",text:"Đã phê duyệt"},{id:"2",value:"2",text:"Chờ phê duyệt"}]),Xe=v.a.Item,Qe=r.a.createContext(),Ye={headTitle:"Quản lý phiếu nhập",addNewTitle:"Thêm phiếu nhập mới"},Ge={fetch:"phieunhap/fetch",delete:"phieunhap/delete/"},Ze=v.a.create()(e=>{let t=e.form,a=(e.index,Je(e,["form","index"]));return r.a.createElement(Qe.Provider,{value:t},r.a.createElement("tr",a))});class et extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(x.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),l=(e.index,Je(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(Qe.Consumer,null,e=>{const o=e.getFieldDecorator;return r.a.createElement("td",l,t?r.a.createElement(Xe,{style:{margin:0}},o(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):l.children)})}}var tt=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+Ge.delete+e.id,{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message)}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],addNewItem:!1},this.columns=[{title:"Mã Kho",dataIndex:"ma_kho",editable:!1},{title:"Người giao hàng",dataIndex:"nguoi_giao_dich",editable:!1},{title:"Mô tả",dataIndex:"note",editable:!1},{title:"Ngày Tạo",dataIndex:"create_on",editable:!1},{title:"Tình trạng",dataIndex:"tinh_trang",editable:!1,render:(e,t)=>We[e].text||e},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(Qe.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(y.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t.key)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.view(t)},"Xem chi tiết")," | ",r.a.createElement(y.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}getDefaultFields(){return{id:"",ma_kho:"",ma_phieu:"",nguoi_giao_dich:"",so_chung_tu:"",note:"",address:"",products:[],tinh_trang:"2"}}addNewRow(){this.props.dispatch(u({phieuAction:$e({},this.props.mainState.phieuAction,{addNewItem:!0,action:"edit",editingKey:""}),phieunhap:this.getDefaultFields()}))}view(e){var t=this.props.mainState;let a=t.phieunhap,n=t.phieuAction;e&&e.ma_phieu&&e.id&&this.props.dispatch(u({phieunhap:$e({},a,e),phieuAction:$e({},n,{addNewItem:!0,action:"view"})}))}fetchData(){fetch(ISD_BASE_URL+Ge.fetch,{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>$e({},e,{key:t}));this.setState({data:t,dataUpToDate:!0}),this.props.dispatch(u({phieunhap:{refresh:!1}}))}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu sản phẩm!",3),console.log(e)})}static getDerivedStateFromProps(e,t){return e.mainState.phieunhap.refresh?{dataUpToDate:null}:null}componentDidUpdate(){null===this.state.dataUpToDate&&this.fetchData()}componentDidMount(){this.fetchData()}render(){let e=this.props.mainState;const t={body:{row:Ze,cell:et}},a=this.columns.map(e=>e.editable?$e({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,e.phieuAction.addNewItem?r.a.createElement(Ve,{dispatch:this.props.dispatch,mainState:this.props.mainState}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(w.a,null,r.a.createElement(S.a,{span:12},r.a.createElement("h2",{className:"head-title"},Ye.headTitle)),r.a.createElement(S.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(E.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},Ye.addNewTitle))))),r.a.createElement(k.a,{components:t,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row"})))}},at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function nt(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const rt=v.a.Item,it=r.a.createContext(),st=v.a.create()(e=>{let t=e.form,a=(e.index,nt(e,["form","index"]));return r.a.createElement(it.Provider,{value:t},r.a.createElement("tr",a))});class lt extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"ranking":return r.a.createElement(j.a,{placeholder:"Chọn xếp hạng"},r.a.createElement(j.a.Option,{value:"A"},"A"),r.a.createElement(j.a.Option,{value:"B"},"B"),r.a.createElement(j.a.Option,{value:"C"},"C"),r.a.createElement(j.a.Option,{value:"D"},"D"));default:return r.a.createElement(x.a,null)}}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),l=(e.index,nt(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(it.Consumer,null,e=>{const o=e.getFieldDecorator;return r.a.createElement("td",l,t?r.a.createElement(rt,{style:{margin:0}},o(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):l.children)})}}var ot=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"order/deleteDh/"+e.id,{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá đơn hàng!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá đơn hàng!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",categoryList:{},newitem:0},this.columns=[{title:"Mã Đơn Hàng",dataIndex:"ma_order",width:"10%",editable:!0,required:!0},{title:"Tên Khách hàng",dataIndex:"name",editable:!0,required:!0},{title:"Địa chỉ",dataIndex:"address",editable:!0,required:!0},{title:"Điện thoại",dataIndex:"phone",editable:!0},{title:"Mã sản phẩm",dataIndex:"product_id",width:"15%",editable:!0,required:!0,render:(e,t)=>{let a=e;return this.state.categoryList&&this.state.categoryList[e]&&(a=this.state.categoryList[e].name),r.a.createElement("span",null,a)}},{title:"Số lượng",dataIndex:"qty",editable:!0},{title:"Ngày nhận hàng",dataIndex:"date_delive",editable:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(it.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(y.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(y.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=at({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới đơn hàng rồi ...")}getDefaultFields(){return{ma_order:"",name:"",phone:"",product_id:"",qty:"",date_delive:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=at({},e,a);fetch(ISD_BASE_URL+"order/updateDh",{method:"POST",headers:C(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(u({showLogin:!0}))):(n.splice(r,1,at({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchProduct(){fetch(ISD_BASE_URL+"order/fetchProductDetailsList",{headers:C()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(u({products:e.data})),this.setState({productList:convertArrayObjectToObject(e.data)})):d.a.error(e.message)}).catch(e=>{console.log(e)})}fetchData(){fetch(ISD_BASE_URL+"order/fetchDh",{headers:C()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>at({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu đơn hàng!",3),console.log(e)})}fetchCategories(){fetch(ISD_BASE_URL+"qlcate/fetchCate",{headers:C()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(u({categories:e.data})),this.setState({categoryList:convertArrayObjectToObject(e.data)})):d.a.error(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:st,cell:lt}},t=this.columns.map(e=>e.editable?at({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(w.a,null,r.a.createElement(S.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý đơn hàng")),r.a.createElement(S.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(E.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm mới đơn hàng"))))),r.a.createElement(k.a,{components:e,bordered:!0,dataSource:this.state.data,columns:t,rowClassName:"editable-row"}))}};const dt=o.a.Header,ht=o.a.Sider;o.a.Content;var ct=Object(l.b)(e=>({mainState:e.main.present}))(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={collapsed:!1,logged:!1,loading:!0},this.toggle=(()=>{this.setState({collapsed:!this.state.collapsed})}),t}componentWillMount(){let e=this.props.mainState;if(e.userInfo)this.props.dispatch(u({defaultRouter:e.defaultRouter}));else{let e=sessionStorage.getItem("ISD_TOKEN");""!=e&&null!=e?fetch(ISD_BASE_URL+"fetchRoles",{headers:C()}).then(e=>e.json()).then(e=>{e.userInfo?this.props.dispatch(u({showLogin:!1,userRoles:e.scopes,defaultRouter:e.scopes[0]&&e.scopes[0].path?e.scopes[0].path:"",userInfo:e.userInfo})):"error"==e.status&&d.a.error(e.message,3),this.setState({loading:!1})}).catch(e=>{console.warn(e),this.setState({loading:!1})}):this.setState({loading:!1})}}renderContent(e){var t=this.props;let a=t.dispatch,n=t.mainState;switch(e){case"qldh":return r.a.createElement(ot,{dispatch:a,mainState:n});case"npp":return r.a.createElement(q,{dispatch:a,mainState:n});case"qluser":return r.a.createElement(z,{dispatch:a,mainState:n});case"qlkho":return r.a.createElement(ne,{dispatch:a});case"qlcate":return r.a.createElement(he,{dispatch:a});case"product":return r.a.createElement(Ce,{dispatch:a,mainState:n});case"qlkh":return r.a.createElement(ye,{dispatch:a});case"qlphieunhap":return r.a.createElement(tt,{dispatch:a,mainState:n})}}render(){if(this.state.loading)return r.a.createElement(Q,null);if(this.props.mainState.showLogin)return r.a.createElement(J,{dispatch:this.props.dispatch});let e=this.props.mainState.defaultRouter;return r.a.createElement(o.a,null,r.a.createElement(ht,{trigger:null,collapsible:!0,collapsed:this.state.collapsed},r.a.createElement("div",{style:{color:"#fff",textAlign:"center",padding:"10px 0"},className:"logo"},r.a.createElement("img",{style:{width:"50%"},src:"./images/logo.png"})),r.a.createElement(f,{mainState:this.props.mainState,dispatch:this.props.dispatch})),r.a.createElement(o.a,null,r.a.createElement(dt,{style:{background:"#fff",padding:0}},r.a.createElement(h.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle}),r.a.createElement(W,{mainState:this.props.mainState,dispatch:this.props.dispatch})),r.a.createElement("div",{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280}},e?this.renderContent(e):r.a.createElement(Q,null))))}}),pt=a(51),ut=a(118),mt=a.n(ut),gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};let ft,yt={showLogin:!0,defaultRouter:"",userRoles:[],categories:[],kho:[],products:[],phieunhap:{nguoi_giao_dich:"",ma_kho:"",note:"",address:"",products:[],editingKey:""},phieuAction:{addNewItem:!1,action:"view"}};var Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};let vt={sidebar:{open:!1,columnId:null},notify:{open:!0,message:"Hahah",header:"Heheh",type:"success"},savePanel:{open:!1},saveDesignNow:!1};var St=a(280),xt=a.n(St);let jt=[p.UPDATE_STATE_DATA];var wt=Object(pt.b)({main:xt()((e=yt,t)=>{switch(t.type){case p.START_APP:return ft=mt()(e),ft=gt({},ft,t.defaultProps);case p.UPDATE_STATE_DATA:return ft=mt()(e),t.updateData&&t.updateData.showLogin&&sessionStorage.setItem("ISD_TOKEN",""),ft=gt({},ft,t.updateData)}return e},{filter:(e,t,a)=>-1!==jt.indexOf(e.type),limit:100}),ui:(e=vt,t)=>{switch(t.type){case p.UPDATE_UI:return Et({},e,t.updateData);case p.TOGGLE_SAVE:return Et({},e,{savePanel:{open:t.open}});case p.SAVE_DESIGN_NOW:return Et({},e,{saveDesignNow:t.confirm||!1})}return e}});const kt=Object(pt.c)(wt);kt.close=(()=>kt.dispatch(END));var bt=kt;const Ct=document.getElementById("isd_app");s.a.render(r.a.createElement(l.a,{store:bt},r.a.createElement(ct,null)),Ct)},401:function(e,t,a){var n={"./af":265,"./af.js":265,"./ar":264,"./ar-dz":263,"./ar-dz.js":263,"./ar-kw":262,"./ar-kw.js":262,"./ar-ly":261,"./ar-ly.js":261,"./ar-ma":260,"./ar-ma.js":260,"./ar-sa":259,"./ar-sa.js":259,"./ar-tn":258,"./ar-tn.js":258,"./ar.js":264,"./az":257,"./az.js":257,"./be":256,"./be.js":256,"./bg":255,"./bg.js":255,"./bm":254,"./bm.js":254,"./bn":253,"./bn.js":253,"./bo":252,"./bo.js":252,"./br":251,"./br.js":251,"./bs":250,"./bs.js":250,"./ca":249,"./ca.js":249,"./cs":248,"./cs.js":248,"./cv":247,"./cv.js":247,"./cy":246,"./cy.js":246,"./da":245,"./da.js":245,"./de":244,"./de-at":243,"./de-at.js":243,"./de-ch":242,"./de-ch.js":242,"./de.js":244,"./dv":241,"./dv.js":241,"./el":240,"./el.js":240,"./en-au":239,"./en-au.js":239,"./en-ca":238,"./en-ca.js":238,"./en-gb":237,"./en-gb.js":237,"./en-ie":236,"./en-ie.js":236,"./en-il":235,"./en-il.js":235,"./en-nz":234,"./en-nz.js":234,"./eo":233,"./eo.js":233,"./es":232,"./es-do":231,"./es-do.js":231,"./es-us":230,"./es-us.js":230,"./es.js":232,"./et":229,"./et.js":229,"./eu":228,"./eu.js":228,"./fa":227,"./fa.js":227,"./fi":226,"./fi.js":226,"./fo":225,"./fo.js":225,"./fr":224,"./fr-ca":223,"./fr-ca.js":223,"./fr-ch":222,"./fr-ch.js":222,"./fr.js":224,"./fy":221,"./fy.js":221,"./gd":220,"./gd.js":220,"./gl":219,"./gl.js":219,"./gom-latn":218,"./gom-latn.js":218,"./gu":217,"./gu.js":217,"./he":216,"./he.js":216,"./hi":215,"./hi.js":215,"./hr":214,"./hr.js":214,"./hu":213,"./hu.js":213,"./hy-am":212,"./hy-am.js":212,"./id":211,"./id.js":211,"./is":210,"./is.js":210,"./it":209,"./it.js":209,"./ja":208,"./ja.js":208,"./jv":207,"./jv.js":207,"./ka":206,"./ka.js":206,"./kk":205,"./kk.js":205,"./km":204,"./km.js":204,"./kn":203,"./kn.js":203,"./ko":202,"./ko.js":202,"./ky":201,"./ky.js":201,"./lb":200,"./lb.js":200,"./lo":199,"./lo.js":199,"./lt":198,"./lt.js":198,"./lv":197,"./lv.js":197,"./me":196,"./me.js":196,"./mi":195,"./mi.js":195,"./mk":194,"./mk.js":194,"./ml":193,"./ml.js":193,"./mn":192,"./mn.js":192,"./mr":191,"./mr.js":191,"./ms":190,"./ms-my":189,"./ms-my.js":189,"./ms.js":190,"./mt":188,"./mt.js":188,"./my":187,"./my.js":187,"./nb":186,"./nb.js":186,"./ne":185,"./ne.js":185,"./nl":184,"./nl-be":183,"./nl-be.js":183,"./nl.js":184,"./nn":182,"./nn.js":182,"./pa-in":181,"./pa-in.js":181,"./pl":180,"./pl.js":180,"./pt":179,"./pt-br":178,"./pt-br.js":178,"./pt.js":179,"./ro":177,"./ro.js":177,"./ru":176,"./ru.js":176,"./sd":175,"./sd.js":175,"./se":174,"./se.js":174,"./si":173,"./si.js":173,"./sk":172,"./sk.js":172,"./sl":171,"./sl.js":171,"./sq":170,"./sq.js":170,"./sr":169,"./sr-cyrl":168,"./sr-cyrl.js":168,"./sr.js":169,"./ss":167,"./ss.js":167,"./sv":166,"./sv.js":166,"./sw":165,"./sw.js":165,"./ta":164,"./ta.js":164,"./te":163,"./te.js":163,"./tet":162,"./tet.js":162,"./tg":161,"./tg.js":161,"./th":160,"./th.js":160,"./tl-ph":159,"./tl-ph.js":159,"./tlh":158,"./tlh.js":158,"./tr":157,"./tr.js":157,"./tzl":156,"./tzl.js":156,"./tzm":155,"./tzm-latn":154,"./tzm-latn.js":154,"./tzm.js":155,"./ug-cn":153,"./ug-cn.js":153,"./uk":152,"./uk.js":152,"./ur":151,"./ur.js":151,"./uz":150,"./uz-latn":149,"./uz-latn.js":149,"./uz.js":150,"./vi":148,"./vi.js":148,"./x-pseudo":147,"./x-pseudo.js":147,"./yo":146,"./yo.js":146,"./zh-cn":145,"./zh-cn.js":145,"./zh-hk":144,"./zh-hk.js":144,"./zh-tw":143,"./zh-tw.js":143};function r(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=401},468:function(e,t,a){e.exports=a(298)}});